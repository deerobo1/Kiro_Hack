<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Practice languages with fun mini-games and track your learning streaks on ConversaLearn.">
    <title>Games & Streaks - ConversaLearn</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html" class="logo">ConversaLearn</a>
                <div class="nav-center" style="display: flex; align-items: center; gap: var(--space-lg);">
                    <div class="streak-counter" style="display: flex; align-items: center; gap: var(--space-sm); background: var(--accent); color: white; padding: var(--space-sm) var(--space-md); border-radius: var(--radius-full); font-size: var(--font-size-sm); font-weight: 500;">
                        üî• <span id="streakCount">7</span> day streak
                    </div>
                </div>
                <div class="nav-actions" style="display: flex; align-items: center; gap: var(--space-md);">
                    <a href="app.html" class="btn btn-secondary">Back to Chat</a>
                    <div class="user-menu" style="position: relative;">
                        <button class="btn btn-secondary" id="userMenuBtn" style="border-radius: var(--radius-full); width: 40px; height: 40px; padding: 0; background: var(--primary); color: white; font-weight: 600;">
                            U
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="section">
        <div class="container">
            <!-- Page Header -->
            <div class="text-center" style="margin-bottom: var(--space-2xl);">
                <h1>Games & Achievements</h1>
                <p>Make learning fun with interactive games and track your progress</p>
            </div>

            <!-- Stats Overview -->
            <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">
                <div class="card text-center">
                    <div style="font-size: var(--font-size-3xl); margin-bottom: var(--space-sm);">üî•</div>
                    <h3 style="margin-bottom: var(--space-xs);">7 Days</h3>
                    <p style="margin: 0; color: var(--text-muted);">Current Streak</p>
                </div>
                <div class="card text-center">
                    <div style="font-size: var(--font-size-3xl); margin-bottom: var(--space-sm);">üèÜ</div>
                    <h3 style="margin-bottom: var(--space-xs);">1,247</h3>
                    <p style="margin: 0; color: var(--text-muted);">Total XP</p>
                </div>
                <div class="card text-center">
                    <div style="font-size: var(--font-size-3xl); margin-bottom: var(--space-sm);">‚≠ê</div>
                    <h3 style="margin-bottom: var(--space-xs);">12</h3>
                    <p style="margin: 0; color: var(--text-muted);">Achievements</p>
                </div>
                <div class="card text-center">
                    <div style="font-size: var(--font-size-3xl); margin-bottom: var(--space-sm);">üìà</div>
                    <h3 style="margin-bottom: var(--space-xs);">#3</h3>
                    <p style="margin: 0; color: var(--text-muted);">Leaderboard Rank</p>
                </div>
            </div>

            <!-- Games Section -->
            <section style="margin-bottom: var(--space-3xl);">
                <h2 style="margin-bottom: var(--space-xl);">Mini-Games</h2>
                <div class="games-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-xl);">
                    <!-- Word Match Game -->
                    <div class="game-card card" style="position: relative; overflow: hidden;">
                        <div style="position: absolute; top: var(--space-md); right: var(--space-md); background: var(--accent); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: 500;">
                            +10 XP
                        </div>
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-md);">üéØ</div>
                        <h3>Word Match</h3>
                        <p>Match Spanish words with their English translations. Perfect for building vocabulary!</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-lg);">
                            <div style="font-size: var(--font-size-sm); color: var(--text-muted);">
                                ‚è±Ô∏è 2-3 min ‚Ä¢ üéÆ Easy
                            </div>
                            <button class="btn btn-primary" onclick="startGame('word-match')">Play Now</button>
                        </div>
                    </div>

                    <!-- Sentence Builder -->
                    <div class="game-card card" style="position: relative; overflow: hidden;">
                        <div style="position: absolute; top: var(--space-md); right: var(--space-md); background: var(--secondary); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: 500;">
                            +15 XP
                        </div>
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-md);">üß©</div>
                        <h3>Sentence Builder</h3>
                        <p>Arrange words in the correct order to form proper Spanish sentences.</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-lg);">
                            <div style="font-size: var(--font-size-sm); color: var(--text-muted);">
                                ‚è±Ô∏è 3-5 min ‚Ä¢ üéÆ Medium
                            </div>
                            <button class="btn btn-primary" onclick="startGame('sentence-builder')">Play Now</button>
                        </div>
                    </div>

                    <!-- Pronunciation Challenge -->
                    <div class="game-card card" style="position: relative; overflow: hidden;">
                        <div style="position: absolute; top: var(--space-md); right: var(--space-md); background: var(--primary); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: 500;">
                            +20 XP
                        </div>
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-md);">üé§</div>
                        <h3>Pronunciation Challenge</h3>
                        <p>Practice your Spanish pronunciation with AI-powered feedback.</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-lg);">
                            <div style="font-size: var(--font-size-sm); color: var(--text-muted);">
                                ‚è±Ô∏è 5-7 min ‚Ä¢ üéÆ Hard
                            </div>
                            <button class="btn btn-primary" onclick="startGame('pronunciation')">Play Now</button>
                        </div>
                    </div>

                    <!-- Flashcards -->
                    <div class="game-card card" style="position: relative; overflow: hidden;">
                        <div style="position: absolute; top: var(--space-md); right: var(--space-md); background: var(--accent); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--font-size-xs); font-weight: 500;">
                            +5 XP
                        </div>
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-md);">üìö</div>
                        <h3>Smart Flashcards</h3>
                        <p>Review vocabulary with spaced repetition for better retention.</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-lg);">
                            <div style="font-size: var(--font-size-sm); color: var(--text-muted);">
                                ‚è±Ô∏è 1-2 min ‚Ä¢ üéÆ Easy
                            </div>
                            <button class="btn btn-primary" onclick="startGame('flashcards')">Play Now</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Achievements Section -->
            <section style="margin-bottom: var(--space-3xl);">
                <h2 style="margin-bottom: var(--space-xl);">Achievements</h2>
                <div class="achievements-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg);">
                    <!-- Unlocked Achievement -->
                    <div class="achievement-card card" style="border: 2px solid var(--accent); background: rgba(16, 185, 129, 0.05);">
                        <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-md);">
                            <div style="font-size: var(--font-size-2xl);">üî•</div>
                            <div>
                                <h4 style="margin: 0; color: var(--accent);">Week Warrior</h4>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-muted);">7-day streak</p>
                            </div>
                            <div style="margin-left: auto; color: var(--accent); font-weight: 600;">‚úì</div>
                        </div>
                        <p style="font-size: var(--font-size-sm); margin: 0;">Maintain a 7-day learning streak</p>
                    </div>

                    <!-- Unlocked Achievement -->
                    <div class="achievement-card card" style="border: 2px solid var(--accent); background: rgba(16, 185, 129, 0.05);">
                        <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-md);">
                            <div style="font-size: var(--font-size-2xl);">üéØ</div>
                            <div>
                                <h4 style="margin: 0; color: var(--accent);">Word Master</h4>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-muted);">100 words learned</p>
                            </div>
                            <div style="margin-left: auto; color: var(--accent); font-weight: 600;">‚úì</div>
                        </div>
                        <p style="font-size: var(--font-size-sm); margin: 0;">Learn 100 new vocabulary words</p>
                    </div>

                    <!-- Locked Achievement -->
                    <div class="achievement-card card" style="opacity: 0.6;">
                        <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-md);">
                            <div style="font-size: var(--font-size-2xl);">üèÜ</div>
                            <div>
                                <h4 style="margin: 0;">Conversation Pro</h4>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-muted);">50 conversations</p>
                            </div>
                            <div style="margin-left: auto; color: var(--text-muted);">üîí</div>
                        </div>
                        <p style="font-size: var(--font-size-sm); margin: 0;">Complete 50 conversation sessions</p>
                        <div style="margin-top: var(--space-sm);">
                            <div style="display: flex; justify-content: space-between; font-size: var(--font-size-xs); color: var(--text-muted); margin-bottom: var(--space-xs);">
                                <span>Progress</span>
                                <span>23/50</span>
                            </div>
                            <div style="height: 4px; background: var(--border); border-radius: 2px; overflow: hidden;">
                                <div style="height: 100%; width: 46%; background: var(--primary); border-radius: 2px;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Locked Achievement -->
                    <div class="achievement-card card" style="opacity: 0.6;">
                        <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-md);">
                            <div style="font-size: var(--font-size-2xl);">‚ö°</div>
                            <div>
                                <h4 style="margin: 0;">Speed Demon</h4>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-muted);">Perfect game streak</p>
                            </div>
                            <div style="margin-left: auto; color: var(--text-muted);">üîí</div>
                        </div>
                        <p style="font-size: var(--font-size-sm); margin: 0;">Get perfect scores in 10 games in a row</p>
                        <div style="margin-top: var(--space-sm);">
                            <div style="display: flex; justify-content: space-between; font-size: var(--font-size-xs); color: var(--text-muted); margin-bottom: var(--space-xs);">
                                <span>Progress</span>
                                <span>3/10</span>
                            </div>
                            <div style="height: 4px; background: var(--border); border-radius: 2px; overflow: hidden;">
                                <div style="height: 100%; width: 30%; background: var(--secondary); border-radius: 2px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Leaderboard Section -->
            <section>
                <h2 style="margin-bottom: var(--space-xl);">Weekly Leaderboard</h2>
                <div class="leaderboard card" style="max-width: 600px; margin: 0 auto;">
                    <div class="leaderboard-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 1px solid var(--border);">
                        <h3 style="margin: 0;">Top Learners This Week</h3>
                        <div style="font-size: var(--font-size-sm); color: var(--text-muted);">Resets in 3 days</div>
                    </div>
                    
                    <div class="leaderboard-list">
                        <!-- Rank 1 -->
                        <div class="leaderboard-item" style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md); border-radius: var(--radius-md); background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); margin-bottom: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #FFD700, #FFA500); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                1
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">Maria Rodriguez</div>
                                <div style="font-size: var(--font-size-sm); color: var(--text-muted);">2,847 XP</div>
                            </div>
                            <div style="font-size: var(--font-size-lg);">üëë</div>
                        </div>

                        <!-- Rank 2 -->
                        <div class="leaderboard-item" style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md); border-radius: var(--radius-md); background: rgba(192, 192, 192, 0.1); margin-bottom: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #C0C0C0, #A0A0A0); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                2
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">James Chen</div>
                                <div style="font-size: var(--font-size-sm); color: var(--text-muted);">2,156 XP</div>
                            </div>
                            <div style="font-size: var(--font-size-lg);">ü•à</div>
                        </div>

                        <!-- Rank 3 (Current User) -->
                        <div class="leaderboard-item" style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md); border-radius: var(--radius-md); background: rgba(205, 127, 50, 0.1); border: 2px solid var(--primary); margin-bottom: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #CD7F32, #B8860B); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                3
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--primary);">You</div>
                                <div style="font-size: var(--font-size-sm); color: var(--text-muted);">1,847 XP</div>
                            </div>
                            <div style="font-size: var(--font-size-lg);">ü•â</div>
                        </div>

                        <!-- Other ranks -->
                        <div class="leaderboard-item" style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md); margin-bottom: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: var(--bg-tertiary); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-weight: 600;">
                                4
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 500;">Sarah Johnson</div>
                                <div style="font-size: var(--font-size-sm); color: var(--text-muted);">1,523 XP</div>
                            </div>
                        </div>

                        <div class="leaderboard-item" style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md);">
                            <div style="width: 40px; height: 40px; background: var(--bg-tertiary); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-weight: 600;">
                                5
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 500;">Alex Kim</div>
                                <div style="font-size: var(--font-size-sm); color: var(--text-muted);">1,234 XP</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Game Modal -->
    <div id="gameModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-xl);">
                <h2 id="gameTitle">Word Match</h2>
                <button id="closeModal" style="background: none; border: none; font-size: var(--font-size-xl); cursor: pointer; color: var(--text-muted);">&times;</button>
            </div>
            <div id="gameContent">
                <!-- Game content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Game functionality
        function startGame(gameType) {
            const modal = document.getElementById('gameModal');
            const title = document.getElementById('gameTitle');
            const content = document.getElementById('gameContent');
            
            const games = {
                'word-match': {
                    title: 'Word Match',
                    content: createWordMatchGame()
                },
                'sentence-builder': {
                    title: 'Sentence Builder',
                    content: createSentenceBuilderGame()
                },
                'pronunciation': {
                    title: 'Pronunciation Challenge',
                    content: createPronunciationGame()
                },
                'flashcards': {
                    title: 'Smart Flashcards',
                    content: createFlashcardsGame()
                }
            };
            
            const game = games[gameType];
            title.textContent = game.title;
            content.innerHTML = game.content;
            modal.style.display = 'flex';
            
            // Initialize game logic
            initializeGame(gameType);
        }

        function createWordMatchGame() {
            return `
                <div class="word-match-game">
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-size: var(--font-size-lg); margin-bottom: var(--space-md);">Match the Spanish words with their English translations</div>
                        <div style="display: flex; justify-content: center; gap: var(--space-lg); margin-bottom: var(--space-lg);">
                            <div>Score: <span id="score">0</span></div>
                            <div>Time: <span id="timer">60</span>s</div>
                        </div>
                    </div>
                    <div class="game-board" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-xl);">
                        <div class="spanish-words">
                            <h4 style="text-align: center; margin-bottom: var(--space-md);">Spanish</h4>
                            <div class="word-list" id="spanishWords"></div>
                        </div>
                        <div class="english-words">
                            <h4 style="text-align: center; margin-bottom: var(--space-md);">English</h4>
                            <div class="word-list" id="englishWords"></div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: var(--space-xl);">
                        <button class="btn btn-primary" onclick="resetWordMatch()">New Round</button>
                    </div>
                </div>
            `;
        }

        function createSentenceBuilderGame() {
            return `
                <div class="sentence-builder-game">
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-size: var(--font-size-lg); margin-bottom: var(--space-md);">Arrange the words to form a correct Spanish sentence</div>
                        <div>Score: <span id="sentenceScore">0</span>/5</div>
                    </div>
                    <div class="sentence-prompt" style="background: var(--bg-tertiary); padding: var(--space-lg); border-radius: var(--radius-md); text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-weight: 600; margin-bottom: var(--space-sm);">English:</div>
                        <div id="englishSentence">"I like to eat pizza on Fridays"</div>
                    </div>
                    <div class="word-bank" style="margin-bottom: var(--space-xl);">
                        <div style="font-weight: 600; margin-bottom: var(--space-md);">Word Bank:</div>
                        <div id="wordBank" style="display: flex; flex-wrap: wrap; gap: var(--space-sm); justify-content: center;"></div>
                    </div>
                    <div class="sentence-area" style="min-height: 60px; border: 2px dashed var(--border); border-radius: var(--radius-md); padding: var(--space-lg); margin-bottom: var(--space-xl);">
                        <div style="font-weight: 600; margin-bottom: var(--space-sm);">Your Sentence:</div>
                        <div id="userSentence" style="min-height: 40px; display: flex; flex-wrap: wrap; gap: var(--space-sm);"></div>
                    </div>
                    <div style="text-align: center;">
                        <button class="btn btn-primary" onclick="checkSentence()">Check Answer</button>
                        <button class="btn btn-secondary" onclick="clearSentence()" style="margin-left: var(--space-md);">Clear</button>
                    </div>
                </div>
            `;
        }

        function createPronunciationGame() {
            return `
                <div class="pronunciation-game">
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-size: var(--font-size-lg); margin-bottom: var(--space-md);">Practice your Spanish pronunciation</div>
                        <div>Accuracy: <span id="pronunciationScore">0</span>%</div>
                    </div>
                    <div class="word-display" style="background: var(--bg-tertiary); padding: var(--space-2xl); border-radius: var(--radius-md); text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-size: var(--font-size-3xl); font-weight: 600; margin-bottom: var(--space-md);" id="pronunciationWord">Hola</div>
                        <div style="font-size: var(--font-size-lg); color: var(--text-muted); margin-bottom: var(--space-lg);" id="pronunciationGuide">OH-lah</div>
                        <button class="btn btn-secondary" onclick="playPronunciation()" style="margin-bottom: var(--space-lg);">üîä Listen</button>
                    </div>
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <button class="btn btn-primary btn-lg" id="recordBtn" onclick="startRecording()">üé§ Record Your Pronunciation</button>
                        <div id="recordingStatus" style="margin-top: var(--space-md); font-size: var(--font-size-sm); color: var(--text-muted);"></div>
                    </div>
                    <div id="pronunciationFeedback" style="text-align: center; margin-top: var(--space-lg);"></div>
                </div>
            `;
        }

        function createFlashcardsGame() {
            return `
                <div class="flashcards-game">
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <div style="font-size: var(--font-size-lg); margin-bottom: var(--space-md);">Review your vocabulary</div>
                        <div>Card <span id="cardNumber">1</span> of <span id="totalCards">10</span></div>
                    </div>
                    <div class="flashcard" id="flashcard" style="width: 100%; height: 300px; background: var(--bg-tertiary); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; cursor: pointer; margin-bottom: var(--space-xl); transition: transform var(--transition-normal);" onclick="flipCard()">
                        <div class="card-content" style="text-align: center;">
                            <div style="font-size: var(--font-size-3xl); font-weight: 600; margin-bottom: var(--space-md);" id="cardText">Casa</div>
                            <div style="font-size: var(--font-size-sm); color: var(--text-muted);">Click to reveal</div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: var(--space-md);">
                        <button class="btn btn-secondary" onclick="markCard('hard')">üò∞ Hard</button>
                        <button class="btn btn-secondary" onclick="markCard('good')">üòä Good</button>
                        <button class="btn btn-primary" onclick="markCard('easy')">üòÑ Easy</button>
                    </div>
                </div>
            `;
        }

        function initializeGame(gameType) {
            switch(gameType) {
                case 'word-match':
                    initWordMatch();
                    break;
                case 'sentence-builder':
                    initSentenceBuilder();
                    break;
                case 'pronunciation':
                    initPronunciation();
                    break;
                case 'flashcards':
                    initFlashcards();
                    break;
            }
        }

        // Word Match Game Logic
        function initWordMatch() {
            const words = [
                {spanish: 'Casa', english: 'House'},
                {spanish: 'Perro', english: 'Dog'},
                {spanish: 'Agua', english: 'Water'},
                {spanish: 'Comida', english: 'Food'},
                {spanish: 'Libro', english: 'Book'}
            ];
            
            const spanishContainer = document.getElementById('spanishWords');
            const englishContainer = document.getElementById('englishWords');
            
            // Shuffle arrays
            const shuffledSpanish = [...words].sort(() => Math.random() - 0.5);
            const shuffledEnglish = [...words].sort(() => Math.random() - 0.5);
            
            spanishContainer.innerHTML = shuffledSpanish.map(word => 
                `<div class="word-item" data-word="${word.spanish}" style="padding: var(--space-md); margin-bottom: var(--space-sm); background: var(--bg-primary); border: 2px solid var(--border); border-radius: var(--radius-md); cursor: pointer; text-align: center; transition: all var(--transition-fast);" onclick="selectWord(this, 'spanish')">${word.spanish}</div>`
            ).join('');
            
            englishContainer.innerHTML = shuffledEnglish.map(word => 
                `<div class="word-item" data-word="${word.english}" style="padding: var(--space-md); margin-bottom: var(--space-sm); background: var(--bg-primary); border: 2px solid var(--border); border-radius: var(--radius-md); cursor: pointer; text-align: center; transition: all var(--transition-fast);" onclick="selectWord(this, 'english')">${word.english}</div>`
            ).join('');
        }

        // Modal controls
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('gameModal').style.display = 'none';
        });

        // Close modal when clicking outside
        document.getElementById('gameModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });

        // Placeholder functions for game interactions
        function selectWord(element, type) {
            // Word match game logic
            console.log('Selected word:', element.dataset.word, 'Type:', type);
        }

        function resetWordMatch() {
            initWordMatch();
        }

        function checkSentence() {
            alert('Sentence checking logic would be implemented here');
        }

        function clearSentence() {
            document.getElementById('userSentence').innerHTML = '';
        }

        function playPronunciation() {
            // Text-to-speech implementation
            if ('speechSynthesis' in window) {
                const word = document.getElementById('pronunciationWord').textContent;
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'es-ES';
                speechSynthesis.speak(utterance);
            }
        }

        function startRecording() {
            alert('Voice recording would be implemented here');
        }

        function flipCard() {
            const cardText = document.getElementById('cardText');
            const flashcard = document.getElementById('flashcard');
            
            // Simple flip animation
            flashcard.style.transform = 'rotateY(180deg)';
            setTimeout(() => {
                cardText.textContent = cardText.textContent === 'Casa' ? 'House' : 'Casa';
                flashcard.style.transform = 'rotateY(0deg)';
            }, 150);
        }

        function markCard(difficulty) {
            console.log('Card marked as:', difficulty);
            // Move to next card logic
        }

        function initSentenceBuilder() {
            const words = ['Me', 'gusta', 'comer', 'pizza', 'los', 'viernes'];
            const wordBank = document.getElementById('wordBank');
            
            wordBank.innerHTML = words.map(word => 
                `<span class="word-chip" style="padding: var(--space-sm) var(--space-md); background: var(--primary); color: white; border-radius: var(--radius-full); cursor: pointer;" onclick="addToSentence('${word}')">${word}</span>`
            ).join('');
        }

        function addToSentence(word) {
            const userSentence = document.getElementById('userSentence');
            const wordSpan = document.createElement('span');
            wordSpan.textContent = word;
            wordSpan.className = 'sentence-word';
            wordSpan.style.cssText = 'padding: var(--space-sm) var(--space-md); background: var(--bg-tertiary); border-radius: var(--radius-md); cursor: pointer;';
            wordSpan.onclick = () => wordSpan.remove();
            userSentence.appendChild(wordSpan);
        }

        function initPronunciation() {
            // Pronunciation game initialization
        }

        function initFlashcards() {
            // Flashcards game initialization
        }
    </script>
</body>
</html>